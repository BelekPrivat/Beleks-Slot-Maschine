<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>üé∞ Belek¬¥s Slot-Maschine</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
html,body{margin:0;padding:0;height:100%;background:#111;color:white;font-family:Arial}
#layout{display:flex;height:100vh;overflow:hidden}
#app{width:55%;display:flex;justify-content:center;align-items:center}
#gameCard{background:linear-gradient(180deg,#111,#000);border:3px solid gold;border-radius:20px;
padding:28px 34px;box-shadow:0 0 30px rgba(255,215,0,.25);display:flex;flex-direction:column;
align-items:center;gap:14px;min-width:420px}
h1{color:gold;font-size:2.6rem;text-shadow:0 0 12px gold}
.status{color:cyan}
.jackpot{color:gold;font-size:1.9rem;text-shadow:0 0 12px gold}
.reels{display:flex;gap:25px;margin:18px 0}
.reel{width:95px;font-size:4.5rem;background:#000;padding:18px;border:5px ridge gold;text-align:center}
.controls{display:flex;gap:10px}
.controls button{padding:12px 18px;font-size:1.05rem;min-width:130px;border:none;border-radius:10px;cursor:pointer}
.spin{background:green;color:white}
.allin{background:red;color:white}
.player-info{font-size:1.25rem;color:cyan}
#right{width:45%;background:black;border-left:4px solid gold;padding:12px;display:flex;flex-direction:column;gap:12px}
.panel{background:linear-gradient(180deg,#111,#000);border:2px solid gold;border-radius:12px;padding:10px}
.panel h3{text-align:center;color:gold}
#leaderboardList{min-height:450px;max-height:450px;overflow-y:auto}
#leaderboardList div{display:flex;justify-content:space-between;padding:6px;border-bottom:1px solid #333}
.lb-1{color:gold}.lb-2{color:silver}.lb-3{color:#cd7f32}.lb-self{border-left:3px solid cyan}
#winLog{min-height:260px;max-height:260px;overflow-y:auto}
.log-win{color:#00ff7f}.log-lose{color:#ff4c4c}.log-jackpot{color:gold}
 
#paytable table{width:100%;border-collapse:collapse}
#paytable th,#paytable td{text-align:center;padding:6px}
#paytable th{color:gold;border-bottom:1px solid gold}
#paytable tr:not(:last-child) td{border-bottom:1px solid rgba(255,215,0,.25)}
 
</style>
</head>

<body>

<button onclick="spin()">‚ñ∂ SPIN</button>
<div id="reels">
 <span id="r1">‚ùî</span>
 <span id="r2">‚ùî</span>
 <span id="r3">‚ùî</span>
</div>
<div id="info"></div>

<script>
firebase.initializeApp({
  apiKey: "DEIN_API_KEY",
  authDomain: "DEIN_PROJEKT.firebaseapp.com",
  projectId: "DEIN_PROJEKT",
});

const db = firebase.firestore();
const functions = firebase.functions();

let playerName = localStorage.getItem("player_name");
if(!playerName){
 playerName = prompt("Spielername:");
 localStorage.setItem("player_name", playerName);
}

/* SERVER FUNKTION */
const spinFn = functions.httpsCallable("spin");

/* ANIMATION */
function animate(el, sym, dur){
 const s = Date.now();
 const i = setInterval(()=>{
  el.innerText = ["üçí","üçã","üçä","üîî","‚≠ê","7Ô∏è‚É£","üíé"][Math.floor(Math.random()*7)];
  if(Date.now()-s>dur){
   clearInterval(i);
   el.innerText = sym;
  }
 },70);
}

async function spin(){
 try{
  const res = await spinFn({ player: playerName, bet: 50 });

  const [a,b,c] = res.data.reels;
  animate(r1,a,600);
  animate(r2,b,800);
  animate(r3,c,1000);

  info.innerText = `üí∞ ${res.data.balance} ‚Ç¨ | Gewinn: ${res.data.win}`;
 }catch(e){
  alert(e.message);
 }
}
</script>

</body>
</html>
